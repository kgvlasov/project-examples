# Скрипт для сравнения полноты загружаемых данных 

## Описание кейса: 
Для построения сложной аналитики в базу PostgreSQL выгружаются сырые данные из нескольких источников. Один из них Qonversion.io - сервис, собирающий данные с рекламных сетей. Qonversion предоставляет два способа выгрузки сырых данных:
- веб-хуки - выбранный способ для загрузки данных
- выгрузка CSV файла из веб-интерфейса личного кабинета заказчика

#### Для корректного построения аналитики важно, что бы данные были полными. Поэтому, если данные перестали поступать вообще или присутствует потеря данных при выгрузке/загрузке, заказчик должен быть оперативно осведомлен об этом для возобновления загрузки данных и восстановлению утерянных данных.

Ограничения:
Заказчик использует server-less архитектуру - все вычисления должны исполнятся в AWS Lambda.

## Задача
#### Написать скрипт, который будет:
- ежедневно сравнивать данные, загружаемые с помощью веб-хуков (данные в базе) с данными, выгружаемыми из веб-интерфейса личного кабинета Qonversion.io 
- уведмолять о наличии расхождений 
- записывать данные из веб-интерфейса в отдельную таблицу в базе для обеспечения восстановления утерянных данных.


## Результат
Написан скрипт, работающий в AWS Lambda, который ежедневно сверяет данные, загруженные в базу за предыдущий день, с данными из веб-интерфейса личного кабинета за эту же дату, а также записывающий данные из веб-интерфейса в таблицу "qonversion_export_csv". При обнаружении расхождений или возникновения ошибок при получении/сравнении данных отправляются уведомления в специально созданный канал в Slack, в котором присутствуют разработчики заказчика.

Для получения данных из веб-интерфейса используется библиотека Selenium, для чтения из базы и записи данных в базу используется библиотеки psycorg2 и sqlalchemy. Для сравнения данных используется библиотека pandas. Для отправки уведомлений в Slack используется библиотека slack-sdk
